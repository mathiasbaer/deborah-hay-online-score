<script src="/javascripts/cells-edit.js" type="text/javascript"></script>
<div class="cell-edit"><form method="post" action="/admin/cells/<% if ( cell.id ) { %><%= cell.id %>/save<% } else { %>new<% } %>">
	<input type="hidden" name="user_id" value="<%= user.id %>"/>
	<% if ( cell.id ) { %>
		<input type="hidden" name="cell_id" value="<%= cell.id %>"/>
	<% } %>
	<label for="title">Type</label>
	<select name="type">
		<% for ( var i = 0; i < types.length; i++ ) { %>
			<option value="<%= types[i] %>" <% if ( types[i] === cell.type ) { %>selected<% } %>><%= types[i] %></option>
		<% } %>
	</select>
	<label for="title">Title</label>
	<input type="text" name="title" value="<%= cell.title || '' %>" /><br/>

	<label for="title">Preview</label>
	<input class="inp-preview" type="text" name="preview" value="<%= cell.preview || 'missing.jpg' %>" /><br/>
	<div class="img-preview-container">
		<img data-base="http://d35vpnmjdsiejq.cloudfront.net/dh/app/cells/" 
		     src="http://d35vpnmjdsiejq.cloudfront.net/dh/app/cells/<%= cell.preview || '' %>" />
	</div><br />

	<fieldset class="fields">
	<label for="fields">Fields</label>
	
	<% if ( cell.fields ) { %>
		<% for ( var i = 0; i < cell.fields.length; i++ ) { %>
			<input type="text" name="field_keys[]" value="<%= cell.fields[i].name %>" />
			<input type="text" name="field_values[]" value="<%= cell.fields[i].value %>" />
		<% } %>
	<% } else { %>
		<input type="text" name="field_keys[]" value="" />
		<input type="text" name="field_values[]" value="" />
	<% } %>
	<br />

	<a class="add-fields" href="#">Add more</a><br/>
	</fieldset>

	<input type="submit" value="Save" />
</form></div>